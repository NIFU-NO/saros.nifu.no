---
title: "Tabeller"
eval: true
crossref:
  tbl-title: "Tabell"
  tbl-prefix: "Tabell "
---

Tabeller er egentlig bare data frame, altså datasett (ikke rådata men sammendrag). Forskjellen er at vi i Saros globalt presenterer alle disse som såkalt gt-tabeller (se helt nederst), som ser mye penere ut enn det man får i de neste eksemplene. Alternativt kan man helt fra starten konvertere til gt, og så gjøre videre manipulasjoner der (litt annen syntaks, men gir flere muligheter for formattering, slå sammen celler, osv).

# Lage prosent/frekvens-tabell

```{r}
library(tidyverse)
min_tabell <-
  saros::ex_survey1 %>% 
  saros::embed_cat_table(dep = b_1:b_3, indep=x2_human, digits=0, data_label="percentage_bare")
min_tabell
```

# Redigere tabeller

Dette blir som å gjøre vanlige operasjoner på et datasett, benytt mutate, filter, osv. Husk at det ikke er nødvendig å finpusse på layouten, så lenge innholdet er riktig (inkluderer også tabelloverskrifter/kolonneoverskrifter).

## Fjerne rader

Husk at selv om det står \`52\` i tabellen kan det være at tallet er lagret som tekst.

```{r}
min_tabell <-
  min_tabell %>%
  filter(`How much do you like living in` != "Bejing" & !is.na(`How much do you like living in`))  
min_tabell
```

## Endre kolonneoverskrift

```{r}
min_tabell <-    
  min_tabell %>%    
  rename(Sted = `How much do you like living in`,
         Menneske = `Is respondent human?`)
min_tabell
```

## Endre tekst i en kolonnes innhold

```{r}
min_tabell <-
  min_tabell %>%
  mutate(Menneske = 
           case_when(Menneske == "Definitely humanoid" ~ "Ja",
                     Menneske == "Robot?" ~ "Nei"))
min_tabell
```

# Presentasjon

```{r}
#| label: tbl-tabell1
#| tbl-cap: "En penere formattert figur. Merk at man ved NIFU ikke trenger å tenke på design, bare innhold."
gt::gt(min_tabell)
```
